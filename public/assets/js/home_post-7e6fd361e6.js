{let e=function(){let e=$("#new-post-form");console.log(e),e.submit((function(o){o.preventDefault(),$.ajax({url:"/post/create",type:"POST",data:e.serialize(),success:function(e){let o=t(e.data.post);$("#posts-list-conatiner>ul").prepend(o),n($(".delete-post-button",o));new PostComments(e.data.post._id);new ToggleLike($(" .likes",o)),new Noty({theme:"relax",text:"Post Published!",type:"success",layout:"topRight",timeout:1500}).show()},error:function(e){console.log(error.responeText)}})}))},t=function(e){return $(`<li id="post-${e._id}" >\n    <p>\n        \n        <small>\n            <a class ="delete-post-button" href="/post/destroy/${e._id}">\n              x\n            </a>\n            <br>\n            <a href="/like/toggle?id=${e._id}&type=Post" class="likes" data-likes="0">\n                0 Like\n            </a>\n          \n            \n        </small>\n            \n    ${e.content}\n    <small>\n        ${e.user.name}\n    </small>\n    </p>\n<div  class="post-comments">   \n<form id="post-${e._id}-comments-form" action="/comments/create" method ="POST">\n<input type="text" name="content" placeholder="Type here to add comment......">\n<input type="hidden" name="post" value ="${e._id}">\n<input type="submit" value="Add Comment">\n</form>\n</div>\n<div class="post-comment-list">\n<ul id="post-comments-${e._id}">\n</ul>\n</div>\n</li>`)},n=function(e){$(e).click((function(t){t.preventDefault(),$.ajax({type:"GET",url:$(e).prop("href"),success:function(e){$(`#post-${e.data.post_id}`).remove(),new Noty({theme:"relax",text:"Post  Deleted!",type:"error",layout:"topRight",timeout:1500}).show()},error:function(e){console.log(error.responeText)}})}))},o=function(){$(".allposts").each((function(){let e=$(this),t=$(" .delete-post-button",e);n(t);let o=e.prop("id").split("-")[1];new PostComments(o);new ToggleLike($(" .likes",e)),new ToggleLike($(" .comment-likes",e))}))};e(),o()}